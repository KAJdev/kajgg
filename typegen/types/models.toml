[Status]
type = "string"
enum = ["online", "offline", "away", "do_not_disturb"]

[MessageType]
type = "string"
enum = ["default", "join", "leave"]

[Flags]
type = "object"

[Flags.properties]
admin = { type = "boolean", doc = "Whether the user is an admin" }
webhook = { type = "boolean", doc = "Whether the user is a webhook" }

[Author]
type = "object"
required = ["id", "username", "created_at", "updated_at"]

[Author.properties]
id = { type = "string", doc = "Unique identifier for the author" }
username = { type = "string", doc = "Display name of the author" }
avatar_url = { type = "string", doc = "URL to the author's avatar image" }
bio = { type = "string", doc = "Biography or description of the author" }
created_at = { type = "string", format = "date-time", doc = "When the author was created" }
updated_at = { type = "string", format = "date-time", doc = "When the author was last updated" }
status = { ref = "Status", doc = "Current online status of the author" }
color = { type = "string", doc = "Color of the author" }
background_color = { type = "string", doc = "Background color of the author's plate" }
bytes = { type = "integer", doc = "The author's total bytes" }
flags = { ref = "Flags", doc = "Flags of the author" }

[Embed]
type = "object"

[Embed.properties]
title = { type = "string", doc = "Title of the embed" }
description = { type = "string", doc = "Description of the embed" }
image_url = { type = "string", doc = "URL to the image of the embed" }
url = { type = "string", doc = "URL to the embed" }
footer = { type = "string", doc = "Footer of the embed" }
color = { type = "string", doc = "Color of the embed" }
video_url = { type = "string", doc = "URL to the video of the embed" }
audio_url = { type = "string", doc = "URL to the audio of the embed" }


[User]
type = "object"
required = ["email"]
allOf = [{ ref = "Author" }]

[User.properties]
email = { type = "string", doc = "Email address of the user" }
token = { type = "string", doc = "Token for the user" }
verified = { type = "boolean", doc = "Whether the user is verified" }
default_status = { ref = "Status", doc = "Default online status of the user" }

[File]
type = "object"
required = ["id", "name", "mime_type", "size", "url"]

[File.properties]
id = { type = "string", doc = "Unique identifier for the file" }
name = { type = "string", doc = "Original filename" }
mime_type = { type = "string", doc = "MIME type of the file" }
size = { type = "integer", doc = "File size in bytes" }
url = { type = "string", doc = "URL to access the file" }
height = { type = "integer", doc = "Height of the file" }
width = { type = "integer", doc = "Width of the file" }

[Channel]
type = "object"
required = ["id", "name", "topic", "created_at", "updated_at", "author_id"]

[Channel.properties]
id = { type = "string", doc = "Unique identifier for the channel" }
name = { type = "string", doc = "Display name of the channel" }
topic = { type = "string", doc = "Channel topic or description" }
created_at = { type = "string", format = "date-time", doc = "When the channel was created" }
updated_at = { type = "string", format = "date-time", doc = "When the channel was last updated" }
last_message_at = { type = "string", format = "date-time", doc = "When the channel had its last message" }
author_id = { type = "string", doc = "ID of the user who created the channel" }
author = { ref = "Author" }

[Emoji]
type = "object"
required = ["id", "name", "animated", "mime_type", "ext"]

[Emoji.properties]
id = { type = "string", doc = "Unique identifier for the emoji" }
name = { type = "string", doc = "Name of the emoji" }
animated = { type = "boolean", doc = "Whether the emoji is animated" }
mime_type = { type = "string", doc = "MIME type of the emoji image" }
ext = { type = "string", doc = "File extension for the emoji image (e.g. png, gif, webp)" }

[Webhook]
type = "object"
required = [
  "id",
  "owner_id",
  "name",
  "color",
  "channel_id",
  "created_at",
  "updated_at",
  "secret",
]

[Webhook.properties]
id = { type = "string", doc = "Unique identifier for the webhook" }
owner_id = { type = "string", doc = "ID of the user who created the webhook" }
name = { type = "string", doc = "Name of the webhook" }
color = { type = "string", doc = "Color of the webhook" }
channel_id = { type = "string", doc = "ID of the channel this webhook belongs to" }
created_at = { type = "string", format = "date-time", doc = "When the webhook was created" }
updated_at = { type = "string", format = "date-time", doc = "When the webhook was last updated" }
secret = { type = "string", doc = "Secret for the webhook" }

[Message]
type = "object"
required = ["id", "type", "files", "created_at", "author_id", "channel_id"]

[Message.properties]
id = { type = "string", doc = "Unique identifier for the message" }
type = { ref = "MessageType", doc = "Type of the message" }
content = { type = "string", doc = "Text content of the message" }
files = { type = "array", items = { ref = "File" }, doc = "List of files attached to the message" }
embeds = { type = "array", items = { ref = "Embed" }, doc = "List of embeds attached to the message" }
mentions = { type = "array", items = { type = "string" }, doc = "list of user ids mentioned in the message" }
created_at = { type = "string", format = "date-time", doc = "When the message was created" }
updated_at = { type = "string", format = "date-time", doc = "When the message was last updated" }
author_id = { type = "string", doc = "ID of the user who sent the message" }
channel_id = { type = "string", doc = "ID of the channel this message belongs to" }
nonce = { type = "string", doc = "Nonce for the message" }
author = { ref = "Author" }
channel = { ref = "Channel" }

[FileUpload]
type = "object"
required = ["file", "upload_url", "method"]

[FileUpload.properties]
file = { ref = "File", doc = "The file metadata created server-side" }
upload_url = { type = "string", doc = "Presigned URL for uploading the file (PUT)" }
method = { type = "string", doc = "HTTP method to use for the upload" }
